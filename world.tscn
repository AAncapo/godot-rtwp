[gd_scene load_steps=28 format=3 uid="uid://b8dolup07qmam"]

[ext_resource type="Script" path="res://input_manager.gd" id="1_ko6fh"]
[ext_resource type="PackedScene" uid="uid://co07r7ktfvc1p" path="res://unit_selection_system/selection_sys.tscn" id="2_pa5tv"]
[ext_resource type="Script" path="res://camera.gd" id="3_7oabq"]
[ext_resource type="Script" path="res://player_team.gd" id="5_3bb4d"]
[ext_resource type="Texture2D" uid="uid://5rqjwl3yaoqs" path="res://characters/portraits/Bale.jpg" id="5_f0ihv"]
[ext_resource type="Texture2D" uid="uid://86aycy8chjb8" path="res://characters/portraits/No Old Man.jpg" id="6_6vbr5"]
[ext_resource type="PackedScene" path="res://characters/Formations.tscn" id="6_56u2j"]
[ext_resource type="PackedScene" uid="uid://bxsxmqyq2sivw" path="res://ui/hud/hud.tscn" id="6_goi0v"]
[ext_resource type="Texture2D" uid="uid://dka1bxqtoamfm" path="res://characters/portraits/Mike.jpg" id="7_s6oam"]
[ext_resource type="Texture2D" uid="uid://cn67obdpe5atn" path="res://characters/portraits/Ryan.PNG" id="8_ef1ag"]
[ext_resource type="Texture2D" uid="uid://bha3o4hdrfjhm" path="res://characters/portraits/Tony.jpg" id="9_c8wmh"]
[ext_resource type="Script" path="res://enemy_team.gd" id="10_x0kho"]

[sub_resource type="NavigationMesh" id="NavigationMesh_t4soq"]
vertices = PackedVector3Array(-6, 0.02, -19.75, -3.75, 0.02, -20, -3.75, 0.02, -24.5, -14.25, 0.02, -24.5, -6, 0.02, -10, -6, 0.02, -19.75, -14.25, 0.02, -24.5, -24.5, 0.02, -17.25, -24.5, 0.02, -10, -14.25, 0.02, -24.5, -24.5, 0.02, -24.5, -24.5, 0.02, -17.25, -3.75, 0.02, -20, 4, 0.02, -20, 4, 0.02, -24.5, -3.75, 0.02, -24.5, 4, 0.02, -24.5, 4, 0.02, -20, 6.25, 0.02, -19.75, 14.25, 0.02, -24.5, 14.25, 0.02, -24.5, 6.25, 0.02, -19.75, 6.25, 0.02, -10, 24.5, 0.02, -9.75, 24.5, 0.02, -17.25, 24.5, 0.02, -17.25, 24.5, 0.02, -24.5, 14.25, 0.02, -24.5, 5, 3.02, -9.25, 1.75, 3.02, -8.75, 5.25, 3.02, -9, -5, 3.02, -8.75, -1.75, 3.02, -8.75, -4.75, 3.02, -9.25, -5, 3.02, -19, -5, 3.02, -8.75, -4.75, 3.02, -9.25, -4.5, 3.02, -18.75, 5.25, 3.02, -19, 4.75, 3.02, -18.75, 5, 3.02, -9.25, 5.25, 3.02, -9, -5, 3.02, -19, -4.5, 3.02, -18.75, 4.75, 3.02, -18.75, 5.25, 3.02, -19, -1, 0.02, -10, -0.75, 0.02, -8.75, 0.75, 0.02, -8.75, 1, 0.02, -10, -1.75, 0.02, -15.5, 4, 0.02, -17.75, -1, 0.02, -16.5, -1.75, 0.02, -15.5, 1, 0.02, -10, 4, 0.02, -10, 4, 0.02, -17.75, -1.5, 0.02, -17.75, -1, 0.02, -16.5, -1.75, 0.02, -15.5, -3.75, 0.02, -16, -3.75, 0.02, -10, -1, 0.02, -10, -24.5, 0.02, 15.75, -24.5, 0.02, 24.5, -15.5, 0.02, 24.5, -6, 0.02, -8, -6, 0.02, -10, -24.5, 0.02, -10, -24.5, 0.02, -1.5, -24.5, 0.02, 7.25, -24.5, 0.02, 15.75, -15.5, 0.02, 24.5, -6, 0.02, -8, -24.5, 0.02, -1.5, -24.5, 0.02, 7.25, -15.5, 0.02, 24.5, -6.25, 0.02, 24.5, 15.25, 0.02, 24.5, 24.5, 0.02, 24.5, 24.5, 0.02, 15.75, 24.5, 0.02, -9.75, 6.25, 0.02, -10, 6, 0.02, -8.25, 24.5, 0.02, -1.25, 15.25, 0.02, 24.5, 24.5, 0.02, 15.75, 24.5, 0.02, 7.25, 24.5, 0.02, 7.25, 24.5, 0.02, -1.25, 6, 0.02, -8.25, 6.25, 0.02, 24.5, 15.25, 0.02, 24.5, 1, 0.02, -7.75, 0.75, 0.02, -8.75, -0.75, 0.02, -8.75, -1, 0.02, -7.75, 0, 0.02, 24.5, -1, 0.02, -7.75, -6, 0.02, -8, -6.25, 0.02, 24.5, 0, 0.02, 24.5, 6.25, 0.02, 24.5, 6, 0.02, -8.25, 5.75, 0.02, -7.75, 6.25, 0.02, 24.5, 5.75, 0.02, -7.75, 1, 0.02, -7.75, 0, 0.02, 24.5)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(7, 4, 8), PackedInt32Array(11, 10, 9), PackedInt32Array(15, 14, 12), PackedInt32Array(12, 14, 13), PackedInt32Array(17, 16, 18), PackedInt32Array(18, 16, 19), PackedInt32Array(21, 20, 22), PackedInt32Array(22, 20, 24), PackedInt32Array(22, 24, 23), PackedInt32Array(27, 26, 25), PackedInt32Array(29, 28, 30), PackedInt32Array(33, 32, 31), PackedInt32Array(37, 36, 34), PackedInt32Array(34, 36, 35), PackedInt32Array(40, 39, 41), PackedInt32Array(41, 39, 38), PackedInt32Array(43, 42, 44), PackedInt32Array(44, 42, 45), PackedInt32Array(47, 46, 48), PackedInt32Array(48, 46, 49), PackedInt32Array(49, 46, 50), PackedInt32Array(52, 51, 53), PackedInt32Array(53, 51, 54), PackedInt32Array(54, 51, 55), PackedInt32Array(58, 57, 56), PackedInt32Array(60, 59, 61), PackedInt32Array(61, 59, 62), PackedInt32Array(65, 64, 63), PackedInt32Array(67, 66, 68), PackedInt32Array(68, 66, 69), PackedInt32Array(72, 71, 70), PackedInt32Array(74, 73, 75), PackedInt32Array(75, 73, 76), PackedInt32Array(76, 73, 77), PackedInt32Array(80, 79, 78), PackedInt32Array(82, 81, 83), PackedInt32Array(83, 81, 84), PackedInt32Array(87, 86, 85), PackedInt32Array(89, 88, 90), PackedInt32Array(90, 88, 92), PackedInt32Array(90, 92, 91), PackedInt32Array(94, 93, 95), PackedInt32Array(95, 93, 96), PackedInt32Array(96, 93, 97), PackedInt32Array(99, 98, 100), PackedInt32Array(100, 98, 101), PackedInt32Array(104, 103, 102), PackedInt32Array(106, 105, 107), PackedInt32Array(107, 105, 108)]
cell_height = 0.01

[sub_resource type="BoxMesh" id="BoxMesh_khm8k"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_hc7yf"]
albedo_color = Color(0.670588, 0.670588, 0.670588, 1)

[sub_resource type="BoxMesh" id="BoxMesh_uun6q"]

[sub_resource type="BoxShape3D" id="BoxShape3D_luuvm"]
size = Vector3(1, 3, 11)

[sub_resource type="BoxMesh" id="BoxMesh_oxf3p"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_qml1f"]
albedo_color = Color(0.286275, 0.286275, 0.286275, 1)

[sub_resource type="BoxMesh" id="BoxMesh_kvdrp"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_mn0o8"]
albedo_color = Color(0.286275, 0.286275, 0.286275, 1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_ukybr"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lyobr"]
albedo_color = Color(0.286275, 0.286275, 0.286275, 1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_gjflt"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[sub_resource type="BoxMesh" id="BoxMesh_1ds4r"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_waaiy"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_cwiys"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[node name="World" type="Node3D"]

[node name="CamBase" type="Node3D" parent="."]
process_mode = 3
transform = Transform3D(1, 0, 0, 0, 0.299191, 0.954193, 0, -0.954193, 0.299191, 0, 0, 0)
script = ExtResource("3_7oabq")

[node name="Camera3D" type="Camera3D" parent="CamBase"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -9.53674e-07, 25.4181)

[node name="SelectionSys" parent="." instance=ExtResource("2_pa5tv")]

[node name="HUD" parent="." instance=ExtResource("6_goi0v")]

[node name="PlayerTeam" type="Node" parent="."]
script = ExtResource("5_3bb4d")
players_in_team = 4
ph_portraits = Array[CompressedTexture2D]([ExtResource("5_f0ihv"), ExtResource("6_6vbr5"), ExtResource("7_s6oam"), ExtResource("8_ef1ag"), ExtResource("9_c8wmh")])

[node name="Players" type="Node3D" parent="PlayerTeam"]

[node name="Formations" parent="PlayerTeam" instance=ExtResource("6_56u2j")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 10.6475)

[node name="InputManager" type="Node" parent="."]
process_mode = 3
script = ExtResource("1_ko6fh")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.518221, -0.631904, 0.57632, -1.49103e-08, 0.673864, 0.738855, -0.855247, -0.38289, 0.34921, 0, 0, 0)
directional_shadow_mode = 0

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_t4soq")

[node name="box" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(0.885345, 0, -0.464935, 0, 1, 0, 0.464935, 0, 0.885345, -2.36448, 0.5, -16.6783)
mesh = SubResource("BoxMesh_khm8k")
skeleton = NodePath("")
surface_material_override/0 = SubResource("StandardMaterial3D_hc7yf")

[node name="box2" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.81038, 0.5, -17.1449)
mesh = SubResource("BoxMesh_uun6q")
skeleton = NodePath("")
surface_material_override/0 = SubResource("StandardMaterial3D_hc7yf")

[node name="wall" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5, 1.5, -13.8081)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/wall"]
shape = SubResource("BoxShape3D_luuvm")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/wall"]
transform = Transform3D(1, 0, 0, 0, 3, 0, 0, 0, 10, 0, 0, 0)
mesh = SubResource("BoxMesh_oxf3p")
skeleton = NodePath("../CollisionShape3D")
surface_material_override/0 = SubResource("StandardMaterial3D_qml1f")

[node name="wall2" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 1.5, -13.8081)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/wall2"]
shape = SubResource("BoxShape3D_luuvm")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/wall2"]
transform = Transform3D(1, 0, 0, 0, 3, 0, 0, 0, 10, 0, 0, 0)
mesh = SubResource("BoxMesh_oxf3p")
skeleton = NodePath("../CollisionShape3D")
surface_material_override/0 = SubResource("StandardMaterial3D_qml1f")

[node name="wall3" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 1.5, -18.8081)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/wall3"]
shape = SubResource("BoxShape3D_luuvm")

[node name="MeshInstance3D" type="MeshInstance3D" parent="NavigationRegion3D/wall3"]
transform = Transform3D(1, 0, 0, 0, 3, 0, 0, 0, 11, 0, 0, 0)
mesh = SubResource("BoxMesh_oxf3p")
skeleton = NodePath("../CollisionShape3D")
surface_material_override/0 = SubResource("StandardMaterial3D_qml1f")

[node name="wall4" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(4, 0, 0, 0, 3, 0, 0, 0, 1, -3.47673, 1.5, -8.80814)
mesh = SubResource("BoxMesh_kvdrp")
surface_material_override/0 = SubResource("StandardMaterial3D_mn0o8")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/wall4"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/wall4/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_ukybr")

[node name="wall5" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(4, 0, 0, 0, 3, 0, 0, 0, 1, 3.46921, 1.5, -8.80814)
mesh = SubResource("BoxMesh_kvdrp")
surface_material_override/0 = SubResource("StandardMaterial3D_lyobr")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/wall5"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/wall5/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_gjflt")

[node name="floor" type="MeshInstance3D" parent="NavigationRegion3D"]
transform = Transform3D(50, 0, 0, 0, 1, 0, 0, 0, 50, 0, -0.5, 0)
mesh = SubResource("BoxMesh_1ds4r")
surface_material_override/0 = SubResource("StandardMaterial3D_waaiy")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/floor"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/floor/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_cwiys")

[node name="EnemyTeam" type="Node" parent="."]
script = ExtResource("10_x0kho")
enemies_in_team = 3

[node name="SpawnPositions" type="Node" parent="EnemyTeam"]

[node name="Marker3D" type="Marker3D" parent="EnemyTeam/SpawnPositions"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -14.1514)

[node name="Marker3D2" type="Marker3D" parent="EnemyTeam/SpawnPositions"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.3, 0, -14.1514)

[node name="Marker3D3" type="Marker3D" parent="EnemyTeam/SpawnPositions"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14.7839, 0, -17.794)

[connection signal="command_units" from="SelectionSys" to="PlayerTeam" method="_on_selection_sys_command_units"]
[connection signal="added_player" from="PlayerTeam" to="HUD" method="_on_player_team_added_player"]
[connection signal="removed_player" from="PlayerTeam" to="HUD" method="_on_player_team_removed_player"]

[editable path="PlayerTeam/Formations"]
