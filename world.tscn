[gd_scene load_steps=17 format=3 uid="uid://drj02j3p1ncdt"]

[ext_resource type="Script" path="res://sel_sys/selector.gd" id="2_pyn2i"]
[ext_resource type="Script" path="res://camera.gd" id="3_7oabq"]
[ext_resource type="Script" path="res://sel_sys/selection_box.gd" id="3_igfxy"]
[ext_resource type="Script" path="res://gui.gd" id="4_tnhci"]
[ext_resource type="Texture2D" uid="uid://dfkj78afni5la" path="res://textures/texture_06.png" id="4_xw032"]
[ext_resource type="PackedScene" uid="uid://ckby50onxho51" path="res://character/character.tscn" id="6_3ctr0"]
[ext_resource type="PackedScene" uid="uid://bt3yeud88yqnf" path="res://character/enemy.tscn" id="7_v38ir"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_ppise"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_sjls7"]
sky_material = SubResource("ProceduralSkyMaterial_ppise")

[sub_resource type="Environment" id="Environment_m5s7i"]
background_mode = 2
sky = SubResource("Sky_sjls7")
tonemap_mode = 2

[sub_resource type="InputEventKey" id="InputEventKey_vbnnp"]
device = -1
pressed = true
keycode = 49
unicode = 49

[sub_resource type="Shortcut" id="Shortcut_shymv"]
events = [SubResource("InputEventKey_vbnnp")]

[sub_resource type="InputEventKey" id="InputEventKey_gbihw"]
device = -1
pressed = true
keycode = 50
unicode = 50

[sub_resource type="Shortcut" id="Shortcut_rllhb"]
events = [SubResource("InputEventKey_gbihw")]

[sub_resource type="NavigationMesh" id="NavigationMesh_t4soq"]
vertices = PackedVector3Array(-29.5, 0.02, -29.5, -29.5, 0.02, 29.5, 29.5, 0.02, 29.5, 29.5, 0.02, -29.5)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]
cell_height = 0.01
agent_max_climb = 0.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_t314k"]
albedo_texture = ExtResource("4_xw032")
uv1_triplanar = true

[node name="Main" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_m5s7i")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.834627, 0.406974, -0.371175, 2.2134e-08, 0.673864, 0.738856, 0.550816, 0.616669, -0.562425, 0, 0, 0)
shadow_enabled = true

[node name="CamBase" type="Node3D" parent="."]
process_mode = 3
transform = Transform3D(1, 0, 0, 0, 0.327827, 0.944737, 0, -0.944737, 0.327827, 0, 0, 0)
script = ExtResource("3_7oabq")
move_speed = 7.0
zoom_amount = 3.0

[node name="Camera3D" type="Camera3D" parent="CamBase"]
unique_name_in_owner = true
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -4.76837e-07, 8.80749)
current = true
size = 40.0

[node name="UnitSelector" type="Node" parent="."]
script = ExtResource("2_pyn2i")

[node name="SelectionBox" type="Control" parent="UnitSelector"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("3_igfxy")

[node name="GUI" type="Control" parent="."]
process_mode = 3
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
script = ExtResource("4_tnhci")

[node name="Paused" type="Label" parent="GUI"]
visible = false
modulate = Color(1, 0, 0, 1)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -44.5
offset_top = -281.0
offset_right = 44.5
offset_bottom = -249.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 23
text = "PAUSED"
horizontal_alignment = 1

[node name="Control" type="Control" parent="GUI"]
custom_minimum_size = Vector2(0, 80)
layout_mode = 1
anchors_preset = 12
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 0
size_flags_vertical = 8

[node name="bg" type="ColorRect" parent="GUI/Control"]
layout_mode = 2
offset_right = 1024.0
offset_bottom = 80.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.145098, 0.145098, 0.145098, 1)

[node name="HBoxContainer" type="HBoxContainer" parent="GUI/Control"]
layout_mode = 1
anchors_preset = -1
offset_left = 5.0
offset_top = 5.0
offset_right = 1019.0
offset_bottom = 75.0
grow_horizontal = 2
grow_vertical = 2

[node name="portraits" type="HBoxContainer" parent="GUI/Control/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="actions" type="HBoxContainer" parent="GUI/Control/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="equip_hgun" type="Button" parent="GUI/Control/HBoxContainer/actions"]
custom_minimum_size = Vector2(50, 0)
layout_mode = 2
size_flags_vertical = 4
shortcut = SubResource("Shortcut_shymv")
text = "pistol"

[node name="equip_lmg" type="Button" parent="GUI/Control/HBoxContainer/actions"]
custom_minimum_size = Vector2(50, 0)
layout_mode = 2
size_flags_vertical = 4
shortcut = SubResource("Shortcut_rllhb")
text = "rifle"

[node name="placeholder" type="HBoxContainer" parent="GUI/Control/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_t4soq")

[node name="floor" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.5, 0)
use_collision = true
collision_mask = 0
size = Vector3(60, 1, 60)
material = SubResource("StandardMaterial3D_t314k")

[node name="player" parent="." instance=ExtResource("6_3ctr0")]

[node name="enemy" parent="." instance=ExtResource("7_v38ir")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, -10)
walk_speed = 1.5

[connection signal="pressed" from="GUI/Control/HBoxContainer/actions/equip_hgun" to="GUI" method="_on_equip_hgun_pressed"]
[connection signal="pressed" from="GUI/Control/HBoxContainer/actions/equip_lmg" to="GUI" method="_on_equip_lmg_pressed"]
